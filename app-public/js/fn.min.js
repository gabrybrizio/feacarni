let PAYMENT_METHOD,ORDER_STATUS;var UTIL=function(){var e={pad:function(e,n){return Array(n+1-e.toString().length).join("0")+e},approx:function(e,t){return exp=Math.pow(10,t),n=Math.round((e+Number.EPSILON)*exp)/exp,n},rnd:function(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e},parameter:function(e,n){var t=n||window.location.href,o=new RegExp("[?&]"+e+"=([^&#]*)","i"),r=o.exec(t);return r?r[1]:""},uFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},isGUID:function(e){var n=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","i");return!0===n.test(e)},scrollToEl:function(e,n){n=n||0,element=document.getElementById(e),window.scrollTo(0,element.offsetTop-n)},isInViewport:function(e){var n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}};return e}();window.addEventListener("scroll",function(e){},!1);var ARRAY=function(){var e={unique:function(e){for(e=e.sort(),i=0;i<e.length;)e[i]==e[i+1]&&(e.splice(i,1),i--),i++;return e},shuffle:function(e){for(var n,t,o=e.length;o;n=parseInt(Math.random()*o),t=e[--o],e[o]=e[n],e[n]=t);return e},remove:function(e){for(var n,t,o=arguments,r=o.length;r>1&&e.length;)for(n=o[--r];-1!==(t=e.indexOf(n));)e.splice(t,1);return e}};return e}(),REGISTRATION=function(){var e={choice:function(e,n){switch(n){case"Azienda":document.querySelectorAll(".field-azienda").forEach(function(e){e.classList.remove("is-hidden")});break;default:document.querySelectorAll(".field-azienda").forEach(function(e){e.classList.add("is-hidden")})}document.querySelectorAll(".form-registrazione-tipo a").forEach(function(e){e.classList.remove("is-focus")}),e.classList.add("is-focus"),tipologia.value=n},copy:function(){spedizione_paese.value=fatturazione_paese.value,spedizione_indirizzo.value=fatturazione_indirizzo.value,spedizione_citta.value=fatturazione_citta.value,spedizione_provincia.value=fatturazione_provincia.value,spedizione_cap.value=fatturazione_cap.value},send:function(){btn_send.classList.add("is-hidden"),form_feedback.classList.remove("red","green"),form_feedback.classList.add("yellow","is-visible"),form_feedback.innerHTML=LANG.get("registration-in-progress");var e=document.querySelector("#registration_form"),n=new FormData(e);API("userSignup",n).then(function(e){form_feedback.classList.remove("red","yellow","green"),"OK"==e?(form_feedback.classList.remove("is-visible"),MODAL.open(LANG.get("registration-success"),"registrazione-ok")):"AZIENDA"==e?(form_feedback.classList.remove("is-visible"),MODAL.open(LANG.get("registration-business"),"registrazione-ok")):(form_feedback.classList.add("red"),btn_send.classList.remove("is-hidden"),form_feedback.innerHTML="KO"==e?LANG.get("warning-try-later"):e)}).catch(function(e){form_feedback.classList.remove("green","yellow"),form_feedback.classList.add("red"),e.message?form_feedback.innerHTML=e.message:form_feedback.innerHTML=LANG.get("warning-try-later"),btn_send.classList.remove("is-hidden")})}};return e}(),PROFILE=function(){var e={update:function(){btn_send.classList.add("is-hidden"),form_feedback.classList.remove("red","green"),form_feedback.classList.add("yellow","is-visible"),form_feedback.innerHTML=LANG.get("loading");var e=document.querySelector("#profile_form"),n=new FormData(e);API("userUpdate",n).then(function(e){form_feedback.classList.remove("red","yellow","green"),form_feedback.classList.remove("is-visible"),MODAL.open(LANG.get("update-ok"),"profilo-ok")}).catch(function(e){form_feedback.classList.remove("green","yellow"),form_feedback.classList.add("red"),e.message?form_feedback.innerHTML=e.message:form_feedback.innerHTML=LANG.get("warning-try-later"),btn_send.classList.remove("is-hidden")})}};return e}(),MODAL=function(){var e={open:function(e,n,t,o){modal_content.innerHTML=e,n=n||"",t=t||!1,"ordine-ok"==n&&(n='<a class="btn" href="/home/">'+LANG.get("close")+"</a>",t=!0),"registrazione-ok"!=n&&"profilo-ok"!=n||(n='<a class="btn" href="/">'+LANG.get("close")+"</a>",t=!0),t||(n+='<a class="btn" onclick="MODAL.close()">'+LANG.get("close")+"</a>"),o?modal_window.classList.add("modal-fullscreen"):modal_window.classList.remove("modal-fullscreen"),modal_actions.innerHTML=n,modal_container.classList.add("is-visible"),document.body.style.overFlow="hidden"},close:function(){modal_container.className="",modal_window.className="",document.body.style.overFlow="auto",modal_content.innerHTML="",modal_actions.innerHTML=""}};return e}(),LOADING=function(){let e={start:function(){MODAL.open(LANG.get("loading"),"",!0)},end:function(){MODAL.close()}};return e}(),FORM=function(){var e={serialize:function(e){for(var n=[],t=0;t<e.elements.length;t++){var o=e.elements[t];if(o.name&&!o.disabled&&"file"!==o.type&&"reset"!==o.type&&"submit"!==o.type&&"button"!==o.type)if("select-multiple"===o.type||"select-one"===o.type)for(var r=0;r<o.options.length;r++)o.options[r].selected&&n.push(encodeURIComponent(o.name)+"="+encodeURIComponent(o.options[r].value));else("checkbox"!==o.type&&"radio"!==o.type||o.checked)&&n.push(encodeURIComponent(o.name)+"="+encodeURIComponent(o.value))}return n.join("&")},send:function(e){btn_send.classList.add("is-hidden"),form_feedback.classList.remove("red","green"),form_feedback.classList.add("yellow","is-visible"),form_feedback.innerHTML=LANG.get("loading");let n=document.querySelector("#contact_form"),t=new FormData(n);API("contactForm",t).then(function(e){form_feedback.classList.remove("red","yellow","green"),form_feedback.classList.add("green"),form_feedback.innerHTML=LANG.get("email-sent-ok")}).catch(function(e){form_feedback.classList.remove("green","yellow"),form_feedback.classList.add("red"),e.message?form_feedback.innerHTML=e.message:form_feedback.innerHTML=LANG.get("warning-try-later"),btn_send.classList.remove("is-hidden")})}};return e}(),SHOP=function(){var e={update:function(e,n,t,o,r){o&&(o=!0===o?window.location.href:o),API("cartUpdate",{productId:e,sign:n,quantity:t,variantId:r}).then(function(e){let n='<a class="btn btn-important" href="/carrello/">'+LANG.get("cart-go-to")+"</a>",t='<a class="btn" onclick="MODAL.close()">'+LANG.get("shop-continue-shopping")+"</a>";switch(e.trim()){case"ADD":case"UPDATED":o?window.location=o:(MODAL.open(LANG.get("cart-added-item"),n+t,!0),SHOP.count());break;case"OUT-OF-STOCK":let r='<a class="btn" onclick="MODAL.close();'+(o?"window.location = "+o+";":"")+'">'+LANG.get("close")+"</a>";MODAL.open(LANG.get("cart-out-of-stock"),r,!0)}}).catch(function(e){MODAL.open(LANG.get("warning-try-later"))})},count:function(){let e=document.getElementById("cart_icon_count");e&&API("cartCount").then(function(n){e.innerHTML=isNaN(n)?"":n}).catch()},remove:function(e,n){API("cartRemoveProduct",{productId:e,variantId:n}).then(function(e){!0===e?window.location=window.location.href:MODAL.open(LANG.get("warning-try-later"))})},payWithBankTransferModal:function(e){let n=LANG.get("shop-bank-transfer-payment"),t='<a class="btn btn-important" onclick="SHOP.payWithBankTransfer(\''+e+"')\">"+LANG.get("proceed")+"</a>";MODAL.open(n,t)},payWithBankTransfer:function(e){LOADING.start(),API("sendOrder",{orderId:e,paymentMethod:PAYMENT_METHOD.BankTransfer}).then(function(){MODAL.open(LANG.get("shop-order-ok"),"ordine-ok")}).catch(function(e){MODAL.open(LANG.get("warning-try-later"))})},onlyEmail:function(e){return LOADING.start(),SHOP.saveDigitalOrderData("digitalOrderForm").then(function(){API("sendOrder",{orderId:e,paymentMethod:PAYMENT_METHOD.CashOnDelivery}).then(function(){MODAL.open(LANG.get("shop-order-ok"),"ordine-ok")}).catch(function(e){MODAL.open(LANG.get("warning-try-later"))})}).catch(function(e){MODAL.open(e.message)})},payWithSatispay:function(e,n){LOADING.start(),API("satispayConfirmOrder",{satispayOrderId:e,orderId:n}).then(function(){MODAL.open(LANG.get("shop-order-ok"),"ordine-ok")}).catch(function(e){MODAL.open(LANG.get("warning-try-later"))})},payWithCashOnDeliveryModal:function(e){let n=LANG.get("shop-cash-on-delivery-payment"),t='<a class="btn btn-important" onclick="SHOP.payWithCashOnDelivery(\''+e+"')\">"+LANG.get("proceed")+"</a>";MODAL.open(n,t)},payWithCashOnDelivery:function(e){LOADING.start(),API("sendOrder",{orderId:e,paymentMethod:PAYMENT_METHOD.CashOnDelivery}).then(function(){MODAL.open(LANG.get("shop-order-ok"),"ordine-ok")}).catch(function(e){MODAL.open(LANG.get("warning-try-later"))})},changeVariant:function(e){location.href=e.value},saveDigitalOrderData:function(e){let n=document.getElementById(e),t=null;return n&&(t=new FormData(n)),API("saveDigitalOrderData",t)}};return e}();let LANG=function(){"use strict";let e,n={};return n.init=function(n){let t={};e=Object.assign({},t,n)},n.dictionary=function(){return LANG_CONFIG},n.get=function(e,n=null){let t="";if(LANG.dictionary||console.log("LANG.dictionary not found."),LANG.dictionary().hasOwnProperty(e)?t=LANG.dictionary()[e]:console.log("Language key '"+e+"' not found in LANG.dictionary()"),n)for(const e in n)t=t.replaceAll(":"+e,n[e]);return t},n}();var ICON=function(){let e={},n=function(e){let n=ICONS_CONFIG._template,t=n.replace("{{icon}}",ICONS_CONFIG[e]);return t};return n.init=function(n){e=n},n}(),APP=function(){"use strict";let e,n={};return n.init=function(n){let t={orderStatus:"",paymentMethod:"",csrf:""};e=Object.assign({},t,n),PAYMENT_METHOD=e.paymentMethod,ORDER_STATUS=e.orderStatus,SHOP.count()},n.csrf=function(){return e.csrf},n}(),API=function(){"use strict";let e={};return e=function(e,n){function t(e){return new Promise(n=>e.json().then(t=>n({status:e.status,ok:e.ok,json:t})))}let o,r=!1;if(n instanceof FormData)o=n,o.append("endpoint",e),o.append("csrf",APP.csrf());else{r=!0;let t={endpoint:e,csrf:APP.csrf()};n=Object.assign({},t,n),o=JSON.stringify(n)}let a={method:"post",body:o};return r&&(a.headers={"content-type":"application/json"}),new Promise((e,n)=>{fetch("/ajax/api.php",a).then(t).then(t=>t.ok?e(t.json.content):n(t.json)).catch(e=>n({networkError:e.message}))})},e}(),RICETTA=function(){var e={set:function(e){document.querySelectorAll(".ricette-tabs a").forEach(function(e,n){e.classList.remove("focus")}),document.querySelectorAll(".ricette-list .ricetta").forEach(function(e,n){e.classList.remove("focus")}),document.querySelector(".tab-"+e).classList.add("focus"),document.querySelector(".ricetta-"+e).classList.add("focus"),$background_focus=document.getElementById("ricetta-"+e+"-immagine").getAttribute("src"),document.querySelector(".articolo-ricette-immagine").style.backgroundImage="url('"+$background_focus+"')"}};return e}();